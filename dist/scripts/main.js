"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var firstCard,secondCard,cards=document.querySelectorAll(".memory-card"),flipCounterTextContainer=document.querySelector("#flip-counter-text"),flipCounterText=document.querySelector("#flip-counter-text").firstElementChild.textContent,board=document.querySelector("#image-container"),imageNodes=document.querySelectorAll(".front-face"),flipCounterSVGCopy=document.querySelector(".svg-text"),bestScore=1/0,flipCount=0,cardIsFlipped=!1,lockBoard=!1;function flipCard(){if(!lockBoard&&this!==firstCard){if(this.classList.add("flip"),flipCount++,document.querySelector("#flip-counter-text").firstElementChild.textContent=flipCount,!cardIsFlipped)return cardIsFlipped=!0,void(firstCard=this);cardIsFlipped=!1,secondCard=this,checkForMatch(),checkWin()&&(flipCounterSVGCopy.classList.add("win-text"),flipCounterTextContainer.style.removeProperty("fill"),setBestScore())}}function checkForMatch(){firstCard.dataset.image===secondCard.dataset.image?disableFlipCard():unflipCards()}function disableFlipCard(){firstCard.removeEventListener("click",flipCard),secondCard.removeEventListener("click",flipCard),resetPairs()}function unflipCards(){lockBoard=!0,setTimeout(function(){firstCard.classList.remove("flip"),secondCard.classList.remove("flip"),resetPairs()},1e3)}function resetPairs(){lockBoard=cardIsFlipped=!1,secondCard=firstCard=null}function shuffle(e){for(var t=_toConsumableArray(e),r=[];0<t.length;){var o=Math.floor(Math.random()*t.length),n=t.splice(o,1)[0],a=n.src,i=n.alt;r.push({src:a,alt:i})}return r}function getAndSetBestScore(){var e=window.localStorage.getItem("bestScore");e&&e<bestScore&&(bestScore=e,document.querySelector(".best-score").textContent=bestScore)}function setBestScore(){flipCount<bestScore&&(bestScore=flipCount,window.localStorage.setItem("bestScore",flipCount),document.querySelector(".best-score").textContent=flipCount)}function startGame(){var r=shuffle(imageNodes);_toConsumableArray(imageNodes).forEach(function(e,t){e.src=r[t].src,e.alt=r[t].alt,e.parentElement.dataset.image=r[t].alt,e.parentElement.classList.remove("flip")}),resetPairs(),flipCounterSVGCopy.classList.remove("win-text"),flipCounterText=flipCount=0,cards.forEach(function(e){return e.addEventListener("click",flipCard)})}function checkWin(){return _toConsumableArray(imageNodes).every(function(e){return e.parentElement.classList.contains("flip")})}document.querySelector(".btn").addEventListener("click",startGame),window.onload=function(){startGame(),getAndSetBestScore()},cards.forEach(function(e){return e.addEventListener("click",flipCard)});